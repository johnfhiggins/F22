library(readxl)
cereal_ps3 <- read_excel("cereal_ps3.xls")
View(cereal_ps3)
library(dplyr)
cereal_ps3 %>% group_by(city,quarter) %>% summarise(across(share, sum))
cereal_ps3 <- cereal_ps3 %>%
group_by(city,quarter) %>%
mutate(in_share= sum(share))
cereal_ps3$y <- log(cereal_ps3$share) - log(1-df1$in_share)
#ols_model <- lm(y ~ price + sugar + mushy, data=cereal_ps3 )
ols_model <- lm(y ~ price, data=cereal_ps3 )
summary(ols_model)
#ols_model <- lm(y ~ price + sugar + mushy, data=cereal_ps3 )
ols_model <- lm(y ~ price, data=cereal_ps3 )
cereal_ps3$y <- log(cereal_ps3$share) - log(1-df1$in_share)
cereal_ps3 <- cereal_ps3 %>%
group_by(city,quarter) %>%
mutate(in_share= sum(share))
cereal_ps3$y <- log(cereal_ps3$share) - log(1-cereal_ps3$in_share)
#ols_model <- lm(y ~ price + sugar + mushy, data=cereal_ps3 )
ols_model <- lm(y ~ price, data=cereal_ps3 )
summary(ols_model)
#ols_model <- lm(y ~ price + sugar + mushy, data=cereal_ps3 )
ols_model <- lm(y ~ price - 1, data=cereal_ps3 )
summary(ols_model)
library(plm)
#ols_model_brand <- plm(y ~ price + sugar + mushy + brand , data=cereal_ps3, index=c("brand"),model="within" )
ols_model_brand <- plm(y ~ price  , data=cereal_ps3, index=c("brand"),model="within" )
summary(ols_model_brand)
library(plm)
#ols_model_brand <- plm(y ~ price + sugar + mushy + brand , data=cereal_ps3, index=c("brand"),model="within" )
ols_model_brand <- plm(y ~ price  , data=cereal_ps3, index=c("brand"),model="within" )
summary(ols_model_brand)
library(ivreg)
inst_range <- paste("z", 1:20, sep="")
(inst_form <- as.formula(paste("y ~ price -1| ", paste(inst_range, collapse= "+"))))
IV_model <- ivreg(inst_form, data = cereal_ps3)
summary(IV_model)
IV_model_brand <- plm(inst_form, data=cereal_ps3, index=c("brand"), model="within")
summary(IV_model_brand)
library(ivreg)
inst_range <- paste("z", 1:20, sep="")
(inst_form <- as.formula(paste("y ~ price | ", paste(inst_range, collapse= "+"))))
IV_model <- ivreg(inst_form, data = cereal_ps3)
summary(IV_model)
library(ivreg)
inst_range <- paste("z", 1:20, sep="")
(inst_form <- as.formula(paste("y ~ price -1| ", paste(inst_range, collapse= "+"))))
IV_model <- ivreg(inst_form, data = cereal_ps3)
summary(IV_model)
library(readxl)
demog_ps3 <- read_excel("Problem Set 4 Data and Code/Data/demog_ps3.xls")
View(demog_ps3)
write.csv(demog_ps3,"/Users/johnhiggins/Documents/F22/IO/demog.csv", row.names = FALSE)
